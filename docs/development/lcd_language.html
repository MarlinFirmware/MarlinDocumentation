<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>LCD Language System | Marlin Firmware</title> <meta property="og:title" content="LCD Language System"> <meta name="author" content="thinkyhead"> <meta property="og:locale" content="en_US"> <meta name="description" content="How Marlin handles LCD languages"> <meta property="og:description" content="How Marlin handles LCD languages"> <link rel="canonical" href="http://marlinfw.org/docs/development/lcd_language.html"> <meta property="og:url" content="http://marlinfw.org/docs/development/lcd_language.html"> <meta property="og:site_name" content="Marlin Firmware"> <meta property="og:type" content="article"> <meta property="article:published_time" content="2018-10-31T03:43:26+00:00"> <meta name="twitter:card" content="summary"> <meta name="twitter:site" content="@MarlinFirmware"> <meta name="twitter:creator" content="@thinkyhead"> <script type="application/ld+json">
{"@context":"http://schema.org","@type":"BlogPosting","headline":"LCD Language System","author":{"@type":"Person","name":"thinkyhead"},"datePublished":"2018-10-31T03:43:26+00:00","dateModified":"2018-10-31T03:43:26+00:00","description":"How Marlin handles LCD languages","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://marlinfw.org/assets/images/logo/marlin/small.png"},"name":"thinkyhead"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://marlinfw.org/docs/development/lcd_language.html"},"url":"http://marlinfw.org/docs/development/lcd_language.html"}</script> <link rel="icon" href="/assets/favicon.ico"> <link rel="stylesheet" href="/assets/stylesheets/main.css"> <!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script><![endif]--> <script src="/assets/javascript/head.min.js"></script> <script type="text/javascript">
      /**
       * As Github pages do not support https for custom domains
       * this is the current best workaround for #18.
       */
      var domains  = ['marlinfw.org', 'localhost', '127.0.0.1' ];
      var pathname = location.pathname.replace(/^\/MarlinDocumentation/, '')
      if (domains.indexOf(window.location.hostname) == -1)
          window.top.location.href = 'http://marlinfw.org' + pathname;

      /**
       * Another ugly workaround trying to improve UX reported by #35
       */
       if (location.protocol != 'http:')
           location.href = 'http:' + window.location.href.substring(window.location.protocol.length);

      /**
       * Improves overall speed by loading javascript and css resources in parallel
       * with the main page.
       */
      head.load(
          "/assets/stylesheets/font-awesome.min.css",

          "/assets/javascript/jquery-2.2.1.min.js",
          "/assets/javascript/jquery-ui.min.js",
          "/assets/javascript/bootstrap.min.js",
          "/assets/javascript/tocify.min.js",
          "/assets/javascript/custom.js",

          "/assets/javascript/sheetrock.min.js",
          "/assets/javascript/cookieconsent.min.js"
      );

      head.ready(function() {
        window.cookieconsent_options = {
          "message":"We use cookies to ensure you get the best experience on our website",
          "dismiss": "Got it!", "learnMore": "More info", "link":"", "theme": "dark-bottom"
        };
      });
    </script> </head> <body role="document"> <nav class="navbar navbar-default navbar-fixed-top custom-no-margin"> <div class="container"> <div class="navbar-header"> <a href="/" class="navbar-brand"> <img src="/assets/images/logo/marlin/text-25.png" alt="Marlin"> </a> <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> </div> <div class="navbar-collapse collapse" id="navbar-main"> <ul class="nav navbar-nav"> <li><a href="/docs/basics/introduction.html">About Marlin</a></li> <li><a href="/meta/download/">Download</a></li> <li><a href="/docs/configuration/configuration.html">Configure</a></li> <li><a href="/docs/basics/install.html">Install</a></li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="navbar-tools">Tools <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a href="/tools/u8glib/converter.html">Bitmap Converter</a></li> <li><a href="/tools/lin_advance/k-factor.html">K-Factor Calibration Pattern</a></li> <li class="divider"> </li> <li><a href="https://github.com/MarlinFirmware/Marlin/issues">Bugtracker</a></li> <li><a href="/docs/basics/reporting_bugs.html">Reporting bugs</a></li> <li class="divider"> </li> <li><a href="https://github.com/MarlinFirmware/Marlin">Source Code Repository</a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="navbar-documentation">Documentation <span class="caret"></span></a> <ul class="dropdown-menu"> <li class="dropdown-submenu configuration"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Configuration</a> <ul class="dropdown-menu"> <li><a href="/meta/configuration/"> All documents </a></li> <li class="divider"> </li> <li><a href="/docs/configuration/configuration.html"> Configuring Marlin 1.1 </a></li> <li><a href="/docs/configuration/laser_spindle.html"> Laser/Spindle Configuration </a></li> <li><a href="/docs/configuration/probes.html"> Probe Configuration </a></li> </ul> </li> <li class="dropdown-submenu development"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Development</a> <ul class="dropdown-menu"> <li><a href="/meta/development/"> All documents </a></li> <li class="divider"> </li> <li><a href="/docs/development/boards.html"> Boards </a></li> <li class="divider"> </li> <li><a href="/docs/development/coding_standards.html"> Coding Standards </a></li> <li><a href="/docs/development/getting_started_pull_requests.html"> Contributing Code with Pull Requests </a></li> <li><a href="/docs/development/git_scripts.html"> Marlin Github Scripts </a></li> <li class="divider"> </li> <li><a href="/docs/development/contributing.html"> Contributing to Marlin </a></li> <li><a href="/docs/development/feature_request.html"> Feature requests </a></li> <li class="divider"> </li> <li><a href="/docs/development/fonts.html"> Adding new fonts </a></li> <li><a href="/docs/development/lcd_language.html"> LCD Language System </a></li> </ul> </li> <li class="dropdown-submenu features"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Features</a> <ul class="dropdown-menu"> <li><a href="/meta/features/"> All documents </a></li> <li class="divider"> </li> <li><a href="/docs/features/auto_bed_leveling.html"> Automatic Bed Leveling </a></li> <li><a href="/docs/features/unified_bed_leveling.html"> Unified Bed Leveling </a></li> <li class="divider"> </li> <li><a href="/docs/features/fwretract.html"> Firmware Retract </a></li> <li><a href="/docs/features/lin_advance.html"> Linear Advance </a></li> <li><a href="/docs/features/tmc_drivers.html"> Trinamic drivers </a></li> <li class="divider"> </li> <li><a href="/docs/features/lcd_menu.html"> LCD Menu Tree </a></li> </ul> </li> <li class="dropdown-submenu gcode"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">G-code</a> <ul class="dropdown-menu"> <li><a href="/meta/gcode/"> All documents </a></li> <li class="divider"> </li> <li><a href="/docs/gcode/G000-G001.html"> G0-G1: Linear Move </a></li> <li><a href="/docs/gcode/G002-G003.html"> G2-G3: Controlled Arc Move </a></li> <li><a href="/docs/gcode/G004.html"> G4: Dwell </a></li> <li><a href="/docs/gcode/G005.html"> G5: Bézier cubic spline </a></li> <li><a href="/docs/gcode/G010.html"> G10: Retract </a></li> <li><a href="/docs/gcode/G011.html"> G11: Recover </a></li> <li><a href="/docs/gcode/G012.html"> G12: Clean the Nozzle </a></li> <li><a href="/docs/gcode/G020.html"> G20: Inch Units </a></li> <li><a href="/docs/gcode/G021.html"> G21: Millimeter Units </a></li> <li><a href="/docs/gcode/G026.html"> G26: Mesh Validation Pattern </a></li> <li><a href="/docs/gcode/G027.html"> G27: Park the nozzle </a></li> <li><a href="/docs/gcode/G028.html"> G28: Auto Home </a></li> <li><a href="/docs/gcode/G029-mbl.html"> G29: Mesh Bed Leveling </a></li> <li><a href="/docs/gcode/G029-abl.html"> G29: Automatic Bed Leveling </a></li> <li><a href="/docs/gcode/G029-ubl.html"> G29: Unified Bed Leveling </a></li> <li><a href="/docs/gcode/G030.html"> G30: Single Z-Probe </a></li> <li><a href="/docs/gcode/G031.html"> G31: Dock Sled </a></li> <li><a href="/docs/gcode/G032.html"> G32: Undock Sled </a></li> <li><a href="/docs/gcode/G033.html"> G33: Delta Auto Calibration </a></li> <li><a href="/docs/gcode/G038.html"> G38.2-G38.3: Probe target </a></li> <li><a href="/docs/gcode/G042.html"> G42: Move to mesh coordinate </a></li> <li><a href="/docs/gcode/G090.html"> G90: Absolute Positioning </a></li> <li><a href="/docs/gcode/G091.html"> G91: Relative Positioning </a></li> <li><a href="/docs/gcode/G092.html"> G92: Set Position </a></li> <li><a href="/docs/gcode/M000-M001.html"> M0-M1: Unconditional stop </a></li> <li><a href="/docs/gcode/M003.html"> M3: Spindle CW / Laser On </a></li> <li><a href="/docs/gcode/M004.html"> M4: Spindle CCW / Laser On </a></li> <li><a href="/docs/gcode/M005.html"> M5: Spindle / Laser Off </a></li> <li><a href="/docs/gcode/M017.html"> M17: Enable Steppers </a></li> <li><a href="/docs/gcode/M018.html"> M18-M84: Disable steppers </a></li> <li><a href="/docs/gcode/M020.html"> M20: List SD Card </a></li> <li><a href="/docs/gcode/M021.html"> M21: Init SD card </a></li> <li><a href="/docs/gcode/M022.html"> M22: Release SD card </a></li> <li><a href="/docs/gcode/M023.html"> M23: Select SD file </a></li> <li><a href="/docs/gcode/M024.html"> M24: Start or Resume SD print </a></li> <li><a href="/docs/gcode/M025.html"> M25: Pause SD print </a></li> <li><a href="/docs/gcode/M026.html"> M26: Set SD position </a></li> <li><a href="/docs/gcode/M027.html"> M27: Report SD print status </a></li> <li><a href="/docs/gcode/M028.html"> M28: Start SD write </a></li> <li><a href="/docs/gcode/M029.html"> M29: Stop SD write </a></li> <li><a href="/docs/gcode/M030.html"> M30: Delete SD file </a></li> <li><a href="/docs/gcode/M031.html"> M31: Print time </a></li> <li><a href="/docs/gcode/M032.html"> M32: Select and Start </a></li> <li><a href="/docs/gcode/M033.html"> M33: Get Long Path </a></li> <li><a href="/docs/gcode/M034.html"> M34: SDCard Sorting </a></li> <li><a href="/docs/gcode/M042.html"> M42: Set Pin State </a></li> <li><a href="/docs/gcode/M043.html"> M43: Debug Pins </a></li> <li><a href="/docs/gcode/M043-T.html"> M43 T: Toggle Details (Debug Pins) </a></li> <li><a href="/docs/gcode/M048.html"> M48: Probe Accuracy Test </a></li> <li><a href="/docs/gcode/M073.html"> M73: Set Print Progress </a></li> <li><a href="/docs/gcode/M075.html"> M75: Start Print Job </a></li> <li><a href="/docs/gcode/M076.html"> M76: Pause Print Job </a></li> <li><a href="/docs/gcode/M077.html"> M77: Stop Print Job </a></li> <li><a href="/docs/gcode/M078.html"> M78: Print Job Stats </a></li> <li><a href="/docs/gcode/M080.html"> M80: Power On </a></li> <li><a href="/docs/gcode/M081.html"> M81: Power Off </a></li> <li><a href="/docs/gcode/M082.html"> M82: E Absolute </a></li> <li><a href="/docs/gcode/M083.html"> M83: E Relative </a></li> <li><a href="/docs/gcode/M085.html"> M85: Inactivity Shutdown </a></li> <li><a href="/docs/gcode/M092.html"> M92: Set Axis Steps-per-unit </a></li> <li><a href="/docs/gcode/M100.html"> M100: Free Memory </a></li> <li><a href="/docs/gcode/M104.html"> M104: Set Hotend Temperature </a></li> <li><a href="/docs/gcode/M105.html"> M105: Report Temperatures </a></li> <li><a href="/docs/gcode/M106.html"> M106: Set Fan Speed </a></li> <li><a href="/docs/gcode/M107.html"> M107: Fan Off </a></li> <li><a href="/docs/gcode/M108.html"> M108: Break and Continue </a></li> <li><a href="/docs/gcode/M109.html"> M109: Wait for Hotend Temperature </a></li> <li><a href="/docs/gcode/M110.html"> M110: Set Line Number </a></li> <li><a href="/docs/gcode/M111.html"> M111: Debug Level </a></li> <li><a href="/docs/gcode/M112.html"> M112: Emergency Stop </a></li> <li><a href="/docs/gcode/M113.html"> M113: Host Keepalive </a></li> <li><a href="/docs/gcode/M114.html"> M114: Get Current Position </a></li> <li><a href="/docs/gcode/M115.html"> M115: Firmware Info </a></li> <li><a href="/docs/gcode/M117.html"> M117: Set LCD Message </a></li> <li><a href="/docs/gcode/M118.html"> M118: Serial print </a></li> <li><a href="/docs/gcode/M119.html"> M119: Endstop States </a></li> <li><a href="/docs/gcode/M120.html"> M120: Enable Endstops </a></li> <li><a href="/docs/gcode/M121.html"> M121: Disable Endstops </a></li> <li><a href="/docs/gcode/M122.html"> M122: TMC Debugging </a></li> <li><a href="/docs/gcode/M125.html"> M125: Park Head </a></li> <li><a href="/docs/gcode/M126.html"> M126: Baricuda 1 Open </a></li> <li><a href="/docs/gcode/M127.html"> M127: Baricuda 1 Close </a></li> <li><a href="/docs/gcode/M128.html"> M128: Baricuda 2 Open </a></li> <li><a href="/docs/gcode/M129.html"> M129: Baricuda 2 Close </a></li> <li><a href="/docs/gcode/M140.html"> M140: Set Bed Temperature </a></li> <li><a href="/docs/gcode/M145.html"> M145: Set Material Preset </a></li> <li><a href="/docs/gcode/M149.html"> M149: Set Temperature Units </a></li> <li><a href="/docs/gcode/M150.html"> M150: Set RGB(W) Color </a></li> <li><a href="/docs/gcode/M155.html"> M155: Temperature Auto-Report </a></li> <li><a href="/docs/gcode/M163.html"> M163: Set Mix Factor </a></li> <li><a href="/docs/gcode/M164.html"> M164: Save Mix </a></li> <li><a href="/docs/gcode/M165.html"> M165: Set Mix </a></li> <li><a href="/docs/gcode/M190.html"> M190: Wait for Bed Temperature </a></li> <li><a href="/docs/gcode/M200.html"> M200: Set Filament Diameter </a></li> <li><a href="/docs/gcode/M201.html"> M201: Set Print Max Acceleration </a></li> <li><a href="/docs/gcode/M203.html"> M203: Set Max Feedrate </a></li> <li><a href="/docs/gcode/M204.html"> M204: Set Starting Acceleration </a></li> <li><a href="/docs/gcode/M205.html"> M205: Set Advanced Settings </a></li> <li><a href="/docs/gcode/M206.html"> M206: Set Home Offsets </a></li> <li><a href="/docs/gcode/M207.html"> M207: Set Firmware Retraction </a></li> <li><a href="/docs/gcode/M208.html"> M208: Set Firmware Recovery </a></li> <li><a href="/docs/gcode/M209.html"> M209: Set Auto Retract </a></li> <li><a href="/docs/gcode/M211.html"> M211: Software Endstops </a></li> <li><a href="/docs/gcode/M217.html"> M217: Filament swap parameters </a></li> <li><a href="/docs/gcode/M218.html"> M218: Set Hotend Offset </a></li> <li><a href="/docs/gcode/M220.html"> M220: Set Feedrate Percentage </a></li> <li><a href="/docs/gcode/M221.html"> M221: Set Flow Percentage </a></li> <li><a href="/docs/gcode/M226.html"> M226: Wait for Pin State </a></li> <li><a href="/docs/gcode/M240.html"> M240: Trigger Camera </a></li> <li><a href="/docs/gcode/M250.html"> M250: LCD Contrast </a></li> <li><a href="/docs/gcode/M260.html"> M260: I2C Send </a></li> <li><a href="/docs/gcode/M261.html"> M261: I2C Request </a></li> <li><a href="/docs/gcode/M280.html"> M280: Servo Position </a></li> <li><a href="/docs/gcode/M290.html"> M290: Babystep </a></li> <li><a href="/docs/gcode/M300.html"> M300: Play Tone </a></li> <li><a href="/docs/gcode/M301.html"> M301: Set Hotend PID </a></li> <li><a href="/docs/gcode/M302.html"> M302: Cold Extrude </a></li> <li><a href="/docs/gcode/M303.html"> M303: PID autotune </a></li> <li><a href="/docs/gcode/M304.html"> M304: Set Bed PID </a></li> <li><a href="/docs/gcode/M350.html"> M350: Set micro-stepping </a></li> <li><a href="/docs/gcode/M351.html"> M351: Set Microstep Pins </a></li> <li><a href="/docs/gcode/M355.html"> M355: Case Light Control </a></li> <li><a href="/docs/gcode/M360.html"> M360: SCARA Theta A </a></li> <li><a href="/docs/gcode/M361.html"> M361: SCARA Theta-B </a></li> <li><a href="/docs/gcode/M362.html"> M362: SCARA Psi-A </a></li> <li><a href="/docs/gcode/M363.html"> M363: SCARA Psi-B </a></li> <li><a href="/docs/gcode/M364.html"> M364: SCARA Psi-C </a></li> <li><a href="/docs/gcode/M380.html"> M380: Activate Solenoid </a></li> <li><a href="/docs/gcode/M381.html"> M381: Deactivate Solenoids </a></li> <li><a href="/docs/gcode/M400.html"> M400: Finish Moves </a></li> <li><a href="/docs/gcode/M401.html"> M401: Deploy Probe </a></li> <li><a href="/docs/gcode/M402.html"> M402: Stow Probe </a></li> <li><a href="/docs/gcode/M404.html"> M404: Set Filament Diameter </a></li> <li><a href="/docs/gcode/M405.html"> M405: Filament Width Sensor On </a></li> <li><a href="/docs/gcode/M406.html"> M406: Filament Width Sensor Off </a></li> <li><a href="/docs/gcode/M407.html"> M407: Filament Width </a></li> <li><a href="/docs/gcode/M410.html"> M410: Quickstop </a></li> <li><a href="/docs/gcode/M420.html"> M420: Bed Leveling State </a></li> <li><a href="/docs/gcode/M421.html"> M421: Set Mesh Value </a></li> <li><a href="/docs/gcode/M428.html"> M428: Home Offsets Here </a></li> <li><a href="/docs/gcode/M500.html"> M500: Save Settings </a></li> <li><a href="/docs/gcode/M501.html"> M501: Restore Settings </a></li> <li><a href="/docs/gcode/M502.html"> M502: Factory Reset </a></li> <li><a href="/docs/gcode/M503.html"> M503: Report Settings </a></li> <li><a href="/docs/gcode/M504.html"> M504: Validate EEPROM contents </a></li> <li><a href="/docs/gcode/M524.html"> M524: Abort SD print </a></li> <li><a href="/docs/gcode/M540.html"> M540: Endstops Abort SD </a></li> <li><a href="/docs/gcode/M600.html"> M600: Filament Change </a></li> <li><a href="/docs/gcode/M603.html"> M603: Configure Filament Change </a></li> <li><a href="/docs/gcode/M605.html"> M605: Dual Nozzle Mode </a></li> <li><a href="/docs/gcode/M665.html"> M665: Delta Configuration </a></li> <li><a href="/docs/gcode/M665-scara.html"> M665: SCARA Configuration </a></li> <li><a href="/docs/gcode/M666.html"> M666: Set Delta endstop adjustments </a></li> <li><a href="/docs/gcode/M666-dual.html"> M666: Set dual endstop offsets </a></li> <li><a href="/docs/gcode/M851.html"> M851: Z Probe Offset </a></li> <li><a href="/docs/gcode/M852.html"> M852: Bed Skew Compensation </a></li> <li><a href="/docs/gcode/M900.html"> M900: Linear Advance Factor </a></li> <li><a href="/docs/gcode/M906.html"> M906: TMC Motor Current </a></li> <li><a href="/docs/gcode/M907.html"> M907: Set Motor Current </a></li> <li><a href="/docs/gcode/M908.html"> M908: Set Trimpot Pins </a></li> <li><a href="/docs/gcode/M909.html"> M909: DAC Print Values </a></li> <li><a href="/docs/gcode/M910.html"> M910: Commit DAC to EEPROM </a></li> <li><a href="/docs/gcode/M911.html"> M911: TMC OT Pre-Warn Condition </a></li> <li><a href="/docs/gcode/M912.html"> M912: Clear TMC OT Pre-Warn </a></li> <li><a href="/docs/gcode/M913.html"> M913: Set Hybrid Threshold Speed </a></li> <li><a href="/docs/gcode/M914.html"> M914: TMC Bump Sensitivity </a></li> <li><a href="/docs/gcode/M915.html"> M915: TMC Z axis calibration </a></li> <li><a href="/docs/gcode/M928.html"> M928: Start SD Logging </a></li> <li><a href="/docs/gcode/M999.html"> M999: STOP Restart </a></li> </ul> </li> <li class="dropdown-submenu hardware"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Hardware</a> <ul class="dropdown-menu"> <li><a href="/meta/hardware/"> All documents </a></li> <li class="divider"> </li> <li><a href="/docs/hardware/boards.html"> Boards </a></li> <li><a href="/docs/hardware/endstops.html"> Endstops </a></li> <li><a href="/docs/hardware/tmc_drivers.html"> Trinamic drivers </a></li> </ul> </li> <li class="divider"> </li> <li><a href="/meta/needs-review/">Documentation Needing Review</a></li> </ul> </li> </ul> <ul class="nav navbar-nav navbar-right visible-lg-block"> <li><a href="https://github.com/MarlinFirmware/MarlinDocumentation/edit/master/_development/lcd_language.md" data-proofer-ignore> <i class="fa fa-pencil-square-o" aria-hidden="true"></i> <span>Improve this page</span> </a></li> </ul> </div> </div> </nav> <div class="container" role="main"> <div class="row"> <div class="col-lg-3 col-md-4 visible-lg-block visible-md-block custom-no-padding"> <div class="custom-fixed-sidebar"> <div id="toc"></div> </div> </div> <div class="col-lg-9 col-md-8 custom-bg-white"> <div class="row"> <div class="col-md-12 custom-article"> <p class="text-right pull-right visible-lg-block hidden-print small custom-pt25"> <a href="https://github.com/thinkyhead" data-toggle="tooltip" data-placement="bottom" title="Visit thinkyhead's profile on Github"><img class="avatar avatar-small" src="https://avatars1.githubusercontent.com/thinkyhead?v=3&amp;s=30" alt="thinkyhead" srcset="https://avatars1.githubusercontent.com/thinkyhead?v=3&amp;s=30 1x, https://avatars1.githubusercontent.com/thinkyhead?v=3&amp;s=60 2x, https://avatars1.githubusercontent.com/thinkyhead?v=3&amp;s=90 3x, https://avatars1.githubusercontent.com/thinkyhead?v=3&amp;s=120 4x" width="30" height="30" data-proofer-ignore="true"></a> </p> <h1 class="custom-article-header">LCD Language System</h1> <hr> <div class="container-fluid"> <div class="row alert alert-warning custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-exclamation-circle fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p>This document describes changes made to the font system for Marlin 1.1.</p> </div> </div> </div> <p>Marlin deals with a variety of different displays and needs to display a lot of different languages in different scripts on them, within their capabilities. The system described here solves some of the related problems that need to be overcome with in a limited environment.</p> <h2 id="the-displays">The Displays</h2> <p>Currently Marlin includes support for two display technologies:</p> <h3 id="character-based-displays">Character based displays:</h3> <ul> <li>Have a fixed set of symbols (charset - font) in their ROM.</li> <li>All of them have a similar (not identical) first 127 symbols, similar to US-ASCII.</li> </ul> <p>On the other hand, symbols 128 and above have major differences from one display to another.</p> <p>Marlin 1.0 and 1.1 currently support:</p> <ul> <li>HD44780 (and similar) with Kana charset A00 <a href="https://www.sparkfun.com/datasheets/LCD/HD44780.pdf">HD44780</a> (Page 17) These are very common, but sadly not very useful when writing in European languages.</li> <li>HD44780 (and similar) with Western charset A02 <a href="https://www.sparkfun.com/datasheets/LCD/HD44780.pdf">HD44780</a> (Page 18). These are rare, but fairly useful for European languages. Also a limited number of Cyrillic symbols is available.</li> <li>HD44780 (and similar) with <a href="http://store.comet.bg/download-file.php?id=466">Cyrillic charset</a> (Page 14). Some of our Russian friends use them.</li> </ul> <p>On all these displays you can define 8 custom symbols to display at once. In Marlin these characters are used on the Boot Screen, and on the Info Screen for the Bed Temp, Degree symbol, Thermometer, “FR” (feed-rate), Clock, and Progress Bar. On the SD Card listing screens some of these characters are re-used again for Up-level, Folder, and Refresh.</p> <h3 id="full-graphical-displays">Full Graphical Displays</h3> <p>Graphical displays provide complete freedom to display whatever we want, so long as we provide a program for it. Currently we deal with 128x64 Pixel Displays and divide this area into ~5 Lines with ~22 columns. So we need monospace fonts with a bounding box of about 6x10.</p> <ul> <li>Until now we’ve been using a custom Marlin font similar to ISO10646-1 but with special symbols at the end, which made ‘ü’ and ‘ä’ inaccessible at 6x10 size.</li> <li>Because these letters were too big for some positions on the Info Screen, we use a full ISO10646-1 font at 6x9 (3200 bytes).</li> <li>When we define <code class="highlighter-rouge">USE_BIG_EDIT_FONT</code> we use an additional ISO10646-1 9x18 font, eating up another 3120 bytes of PROGMEM - but readable without glasses!</li> </ul> <h2 id="the-languages">The Languages</h2> <p>Marlin currently supports 33 different language variants:</p> <table> <thead> <tr> <th>Code</th> <th>Language</th> <th> </th> <th>Code</th> <th>Language</th> </tr> </thead> <tbody> <tr> <td>en</td> <td>English</td> <td> </td> <td>an</td> <td>Aragonese</td> </tr> <tr> <td>bg</td> <td>Bulgarian</td> <td> </td> <td>ca</td> <td>Catalan</td> </tr> <tr> <td>cn</td> <td>Chinese</td> <td> </td> <td>cz</td> <td>Czech</td> </tr> <tr> <td>cz_utf8</td> <td>Czech (UTF8)</td> <td> </td> <td>de</td> <td>German</td> </tr> <tr> <td>el</td> <td>Greek</td> <td> </td> <td>el-gr</td> <td>Greek (Greece)</td> </tr> <tr> <td>es</td> <td>Spanish</td> <td> </td> <td>eu</td> <td>Basque-Euskera</td> </tr> <tr> <td>fi</td> <td>Finnish</td> <td> </td> <td>fr</td> <td>French</td> </tr> <tr> <td>fr_utf8</td> <td>French (UTF8)</td> <td> </td> <td>gl</td> <td>Galician</td> </tr> <tr> <td>hr</td> <td>Croatian</td> <td> </td> <td>it</td> <td>Italian</td> </tr> <tr> <td>kana</td> <td>Japanese</td> <td> </td> <td>kana_utf8</td> <td>Japanese (UTF8)</td> </tr> <tr> <td>nl</td> <td>Dutch</td> <td> </td> <td>pl</td> <td>Polish</td> </tr> <tr> <td>pt</td> <td>Portuguese</td> <td> </td> <td>pt-br</td> <td>Portuguese (Brazilian)</td> </tr> <tr> <td>pt-br_utf8</td> <td>Portuguese (Brazilian) (UTF8)</td> <td> </td> <td>pt_utf8</td> <td>Portuguese (UTF8)</td> </tr> <tr> <td>ru</td> <td>Russian</td> <td> </td> <td>sk</td> <td>Slovak (UTF8)</td> </tr> <tr> <td>tr</td> <td>Turkish</td> <td> </td> <td>uk</td> <td>Ukrainian</td> </tr> <tr> <td>zh_CN</td> <td>Chinese (Simplified)</td> <td> </td> <td>zh_TW</td> <td>Chinese (Taiwan)</td> </tr> </tbody> </table> <h2 id="the-problem">The Problem</h2> <p>All these languages (except English) normally use extended symbols not contained in US-ASCII. Even the English translation uses some Symbols not in US-ASCII (e.g., ‘<code class="highlighter-rouge">\002</code>’ for Thermometer, <code class="highlighter-rouge">STR_h3</code> for ‘³’). In the code itself symbols may be used without taking into account the display they’re written on.</p> <p>The upshot of all this is that on Western displays you’ll see a ‘<code class="highlighter-rouge">~</code>’ while on Cyrillic an “arrow coming from top - pointing to left” (which is quite the opposite of what the programmer wanted). The Germans want to use “<code class="highlighter-rouge">ÄäÖöÜüß</code>”, the Finnish at least “<code class="highlighter-rouge">äö</code>”. Other European languages want to see their accents too. For other scripts like Cyrillic, Japanese, Greek, Hebrew, … you have to find totally different symbol sets.</p> <p>The Japanese translator dealt with two scripts, introducing a special font for Graphical Displays and making use of the Japanese extended character displays. Thus he ended up with two pretty unreadable <code class="highlighter-rouge">language.h</code> files full of ‘<code class="highlighter-rouge">\xxx</code>’ definitions. Other languages either tried to avoid words that included special symbols or just used the basic symbols without the accents, dots… whatever.</p> <p>This system was created to address these problems.</p> <h2 id="the-partial-solution">The (Partial) Solution</h2> <p>On a full-featured desktop system like Windows or Linux we could install <code class="highlighter-rouge">unifont.ttf</code> and some library code and we’d be done. But embedded systems have very limited resources! So we must find ways to limit the space used (<code class="highlighter-rouge">unifont.ttf</code> alone is ~12MB!), requiring some compromise.</p> <h3 id="aims">Aims</h3> <ul> <li>Make the input for translators as convenient as possible. (Unicode UTF8)</li> <li>Make the displays show the scripts as best as they can. (fonts, mapping tables)</li> <li>Don’t destroy the existing language files.</li> <li>Don’t use more CPU resources.</li> <li>Don’t use too much memory.</li> </ul> <h3 id="actions">Actions</h3> <ul> <li>Declare the display hardware we use. (<code class="highlighter-rouge">Configuration.h</code>)</li> <li>Declare the language or script we use. (<code class="highlighter-rouge">Configuration.h</code>)</li> <li>Declare the kind of input we use. Ether direct pointers to the font (<code class="highlighter-rouge">\xxx</code>) or UTF-8 and the font to use on graphic displays. (<code class="highlighter-rouge">language_xx.h</code>)</li> <li>Declare the translations. (<code class="highlighter-rouge">language_xx.h</code>)</li> <li>Make a <code class="highlighter-rouge">strlen()</code> that works with UTF8. (<code class="highlighter-rouge">ultralcd.cpp</code>)</li> <li>Separate the Marlin Symbols into their own font. (<code class="highlighter-rouge">dogm_font_data_Marlin_symbols.h</code>)</li> <li>Make the fontswitch function remember the last used font. (<code class="highlighter-rouge">ultralcd_impl_DOGM.h</code>)</li> <li>Make output functions that count the number of chars written and switch the font to Marlin symbols and back when needed. (<code class="highlighter-rouge">ultralcd_impl_DOGM.h</code>) (<code class="highlighter-rouge">ultralcd_impl_HD44780.h</code>)</li> <li>Make three fonts to simulate the HD44780 charsets on dogm-displays. With these fonts the translator can check how the translation will look on character-based displays.</li> <li>Make ISO fonts for Cyrillic and Katakana - because they don’t need a mapping table, are faster to deal with, and have a better charset than the HD44780 fonts. (Less compromise!)</li> <li>Make mapping functions and tables to convert from UTF8 to the fonts and integrate in the new output functions. (<code class="highlighter-rouge">utf_mapper.h</code>)</li> <li>Delete the obsolete <code class="highlighter-rouge">LiquidCrystalRus.xxx</code> files and their calls in ‘<code class="highlighter-rouge">ultralcd_implementation_HD44780.h</code>’.</li> <li>Split ‘<code class="highlighter-rouge">dogm_font_data_Marlin.h</code>’ into separate fonts and delete. (+<code class="highlighter-rouge">dogm_font_data_6x9_marlin.h</code>, +<code class="highlighter-rouge">dogm_font_data_Marlin_symbols.h</code>, -<code class="highlighter-rouge">dogm_font_data_Marlin.h</code>)</li> <li>Do a bit of preprocessor magic to match displays - fonts and mappers in <code class="highlighter-rouge">utf_mapper.h</code>.</li> </ul> <h2 id="translators-handbook">Translators’ handbook</h2> <ul> <li>Check first whether a <code class="highlighter-rouge">language_xx.h</code> file for your language already exists (-&gt; b.) or not (-&gt; e.).</li> <li>Either there’s a <code class="highlighter-rouge">MAPPER_NON</code> declared (-&gt; c.) or some other mapper (-&gt; d.)</li> </ul> <h4 id="direct-hd44780-translation">Direct HD44780 Translation</h4> <ul> <li>Symbols outside the normal ASCII-range (32-128) are written as “<code class="highlighter-rouge">\xxx</code>” and point directly into the font of the hardware declared in <code class="highlighter-rouge">Configuration.h</code>.</li> <li>HD44780 displays have one of three fonts (<code class="highlighter-rouge">JAPANESE</code>, <code class="highlighter-rouge">WESTERN</code>, <code class="highlighter-rouge">CYRILLIC</code>) set by <code class="highlighter-rouge">DISPLAY_CHARSET_HD44780</code>.</li> <li>Even on the full graphic displays one of these character sets can be used by defining <code class="highlighter-rouge">SIMULATE_ROMFONT</code>.</li> <li>If you don’t make use of the extended character set your file will look like <code class="highlighter-rouge">language_en.h</code> and your language file will work on all the displays.</li> <li>If you make extensive use, your file will look like <code class="highlighter-rouge">language_kana.h</code> and your language file will only work on one of the displays (in this case <code class="highlighter-rouge">DISPLAY_CHARSET_HD44780</code> == <code class="highlighter-rouge">JAPANESE</code>).</li> <li>Be careful with the characters <code class="highlighter-rouge">0x5C = '\'</code>, and <code class="highlighter-rouge">0x7B - 0x7F</code> “<code class="highlighter-rouge"><span class="p">{</span><span class="err">|</span><span class="p">}</span></code>”. These are not the same on all variants.</li> </ul> <h4 id="mappers">Mappers</h4> <ul> <li> <code class="highlighter-rouge">MAPPER_NON</code> is the fastest and least memory-hungry variant. Language files without accents use this.</li> <li>If you want to make use of more than a few symbols outside standard ASCII or want to improve the portability to more types of displays, use UTF-8 input. Which means defining another mapper.</li> <li>UTF-8 input is used for mappers other than <code class="highlighter-rouge">MAPPER_NON</code>. With a mapper, instead of “<code class="highlighter-rouge">\xe1</code>” (JAPANESE) or <code class="highlighter-rouge">STR_ae</code> you can simply type “<code class="highlighter-rouge">ä</code>”. The “<code class="highlighter-rouge">ä</code>” expands to “<code class="highlighter-rouge">\xc3\xa4</code>”. “Я” expands to “<code class="highlighter-rouge">\xd0\xaf</code>” … “ホ” expands to “<code class="highlighter-rouge">\xe3\x83\x9b</code>” … etc.</li> <li>Due to storage limitations we can’t use every UTF-8 glyph at once, so we capture only a subset containing the characters we need: <ul> <li> <code class="highlighter-rouge">MAPPER_C2C3</code> corresponds well with Western-European languages. The possible symbols are listed at <a href="http://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)">this Latin-1 page</a>.</li> <li> <code class="highlighter-rouge">MAPPER_D0D1</code> corresponds well with the Cyrillic languages. See <a href="http://en.wikipedia.org/wiki/Cyrillic_(Unicode_block)">this Cyrillic page</a>.</li> <li> <code class="highlighter-rouge">MAPPER_E382E383</code> works with the Japanese Katakana script. See <a href="http://en.wikipedia.org/wiki/Katakana_(Unicode_block)">this Katakana page</a>.</li> <li>There a few other language-specific mappers, and more are being developed.</li> </ul> </li> </ul> <p>Mapper functions will only catch the ‘lead-in’ described in the mapper’s name (e.g., <code class="highlighter-rouge">C2C3</code>). If the input doesn’t match, the mapper will output a ‘?’ or garbage.</p> <p>The last byte in the sequence ether points directly into a matching ISO10646 font or (via a mapper_table) into one of the HD44780 fonts.</p> <p>The mapper_tables do their best to find a similar symbol in the HD44780<em>fonts (for example, replacing small letters with the matching capital letters). But they may fail to find a match and will output a ‘?’. There are combinations of language and display which simply have no corresponding symbols - like Cyrillic on a Japanese display or _vice-versa</em>. In those cases the compiler will throw an error.</p> <p>In short: Choose a mapper that works with the symbols you want to use. Use only symbols matching the mapper. On Full Graphic Displays all symbols should be fine. Using the graphical display, you can test for bad substitutions or question-marks that would appear on character displays by defining <code class="highlighter-rouge">SIMULATE_ROMFONT</code> and trying the different variants.</p> <p>If you get a lot of question marks on the Hitachi-based displays with your new translation, maybe creating an additional language file with the format <code class="highlighter-rouge">language_xx_utf8.h</code> is the way to go.</p> <h3 id="mapper-notes">Mapper Notes</h3> <ul> <li>As mentioned, <code class="highlighter-rouge">MAPPER_NON</code> is the fastest and least memory-hungry variant. While <code class="highlighter-rouge">MAPPER_NON</code> language files are ugly and tedious to maintain for non-Roman languages, for Roman languages it is trivial to make a <code class="highlighter-rouge">MAPPER_NON</code> file without any accents.</li> <li>Mappers together with an <code class="highlighter-rouge">ISO10646_*</code> font are the second-best choice in terms of speed and memory consumption. Only a few more decisions are made per-character.</li> <li>On top of space used for the font, mappers use an additional ~128 bytes for the <code class="highlighter-rouge">mapping_table</code>.</li> <li>Creating a new language file is no big thing! <ul> <li>Make a new file with the format ‘<code class="highlighter-rouge">language_xx.h</code>’ (or ‘<code class="highlighter-rouge">language.xx_utf8.h</code>’)</li> <li>In this file specify the mapper (e.g., <code class="highlighter-rouge">MAPPER_NON</code>) and font (e.g., <code class="highlighter-rouge">DISPLAY_CHARSET_ISO10646_1</code>) and translate some of the strings defined in <code class="highlighter-rouge">language_en.h</code>. (Remove <code class="highlighter-rouge">#ifndef</code> <code class="highlighter-rouge">#endif</code> from the defines.)</li> <li>You don’t have to translate all strings. Omitted definitions will simply use the English strings in in <code class="highlighter-rouge">language_en.h</code>.</li> </ul> </li> <li>If there’s no existing mapper for your language then things get a bit more complex. With the Hitachi-based displays you can’t make something useful without a matching charset. For graphical display… let’s take the example of Greek: <ul> <li>Find a matching charset. (<a href="http://en.wikipedia.org/wiki/Greek_and_Coptic">Greek and Coptic</a>)</li> <li>Provide a bitmap font containing the symbols in the right size (5x9 to 6x10 recommended). Normal ASCII characters should occupy 1 to 127, and the upper 128 places should be populated with your special characters.</li> <li>Write a mapper that catches -in this case- <code class="highlighter-rouge">0xCD</code> to <code class="highlighter-rouge">0xCF</code> and add it to <code class="highlighter-rouge">utf_mapper.h</code>.</li> <li>In case of an ISO10646 font we have a <code class="highlighter-rouge">MAPPER_ONE_TO_ONE</code> and don’t have to make a table.</li> <li>If you discover enough useful symbols in one of the HD44780 fonts you can provide a mapping table. For example <code class="highlighter-rouge">WESTERN</code> contains ‘alpha’, ‘beta’, ‘pi’, ‘Sigma’, ‘omega’ ‘My’ - which is not enough to make USEFUL table - I think.</li> <li>If you want to integrate an entirely new variant of a Hitachi-based display. Add it to <code class="highlighter-rouge">Configuration.h</code> and define mapper tables in <code class="highlighter-rouge">utf_mapper.h</code>. You may need to add a new mapper function.</li> </ul> </li> </ul> <p>The length of strings (for menu titles, edit labels, etc.) is limited. “17 characters” was a crude rule of thumb. Obviously 17 is too long for a 16x2 display. So, language files are free to check the LCD width and provide shorter strings in the following manner:</p> <div class="language-cpp highlighter-rouge"> <pre class="highlight"><code><span class="cp">#if LCD_WIDTH &lt;= 16
</span>  <span class="cp">#define MSG_SPRING_LABEL "Spring"
#else
</span>  <span class="cp">#define MSG_SPRING_LABEL "Springiness"
#endif
</span></code></pre> </div> <p>On 16x2 displays, strings suited to a 20x4 display will be chopped to fit. So if shorter string isn’t provided, at least make similar strings different early in the string. (‘<code class="highlighter-rouge">Someverylongoptionname x</code>’ -&gt; ‘<code class="highlighter-rouge">x Somverylongoptionname</code>’)</p> <p>All translatable strings are first declared in <code class="highlighter-rouge">language_en.h</code> and then language maintainers follow up by providing translations in their own languages. Marlin includes a script named <code class="highlighter-rouge">findMissingTranslations.sh</code> which list the strings needing translation for one or more languages.</p> <p>Strings in <code class="highlighter-rouge">language.h</code> are for serial output, so don’t require any translation. Core error strings must always be in English to satisfy host protocols.</p> <p>For information about fonts see <a href="https://github.com/MarlinFirmware/Marlin/tree/1.1.x/buildroot/share/fonts#readme"><code class="highlighter-rouge">buildroot/share/fonts/README.md</code> file</a>.</p> <h2 id="user-instructions">User Instructions</h2> <p>Define your hardware and the desired language in <code class="highlighter-rouge">Configuration.h</code>.</p> <p>To find out which character set your hardware uses, set <code class="highlighter-rouge">#define LCD_LANGUAGE test</code> and compile Marlin. In the menu you’ll see two lines from the upper half of the character set:</p> <ul> <li> <code class="highlighter-rouge">JAPANESE</code> displays “<code class="highlighter-rouge">バパヒビピフブプヘベペホボポマミ</code>”</li> <li> <code class="highlighter-rouge">WESTERN</code> displays “<code class="highlighter-rouge">ÐÑÒÓÔÕÖ×ØÙÚÛÜÝÞß</code>”</li> <li> <code class="highlighter-rouge">CYRILLIC</code> displays “<code class="highlighter-rouge">РСТУФХЦЧШЩЪЫЬЭЮЯ</code>”</li> </ul> <p>If you get an error message about “missing mappers” during compilation - lie about your display’s hardware font to see at least some garbage, or select another language.</p> <p>English works on all hardware.</p> <h2 id="definitions">Definitions</h2> <p><code class="highlighter-rouge">LCD_LANGUAGE</code>: The LCD language and encoding to compile in. For example, <code class="highlighter-rouge">pt-br_utf8</code> specifies Portuguese (Brazil) in UTF-8 format with a mapper. For a faster, lighter, but non-accented translation you might choose <code class="highlighter-rouge">pt-br</code> instead.</p> <p><code class="highlighter-rouge">MAPPER_C2C3</code>: This is a mapper set by some language files, and indicates that Marlin should use the mapper for Unicode pages C2 and C3. In this mapper, strings are converted from raw UTF-8 input to single ASCII characters from 0-127, and indexes from 0-127 within the combined two 64-glyph pages C2 and C3.</p> <p><code class="highlighter-rouge">SIMULATE_ROMFONT</code>: Languages can opt to use the HD44780 ROM font special characters on graphical display. This method can be used for accented Western, Katakana, and Cyrillic if they don’t supply their own fonts, or just for testing character-based mappers on a graphical display.</p> <p><code class="highlighter-rouge">DISPLAY_CHARSET_ISO10646_1</code>: To support a graphical display, a language file must specify either <code class="highlighter-rouge">SIMULATE_ROMFONT</code> or a display character set. This specific option selects the Western font for use on graphical display. Others include <code class="highlighter-rouge">ISO10646_5</code>, <code class="highlighter-rouge">ISO10646_KANA</code>, <code class="highlighter-rouge">ISO10646_GREEK</code>, <code class="highlighter-rouge">ISO10646_CN</code>, <code class="highlighter-rouge">ISO10646_TR</code>, and <code class="highlighter-rouge">ISO10646_PL</code>. If no character set is specified, Marlin assumes <code class="highlighter-rouge">ISO10646_1</code>.</p> <p><code class="highlighter-rouge">MAPPER_ONE_TO_ONE</code>: Most character sets on graphical displays (including <code class="highlighter-rouge">SIMULATE_ROMFONT</code>) map the character index directly to its position in the upper half of the font. This is possible for character sets that have only 2 contiguous pages of Unicode containing all the special characters. Other mappers use logic or a lookup table to locate the glyph.</p> </div> </div> </div> </div> </div> <footer> <div class="container"> <div class="row"> <div class="col-lg-12"> <hr> </div> </div> <div class="row"> <div class="col-lg-8"> <p>Brought to you with <i class="fa fa-heart text-danger" aria-hidden="true"></i> lack of <i class="fa fa-bed" aria-hidden="true"></i> and lots of <i class="fa fa-coffee" aria-hidden="true"></i>. <br> The contents of this website are © 2018 under the terms of the <a href="http://www.gnu.org/licenses/gpl-3.0.txt">GPLv3</a> License.</p> </div> <div class="col-lg-4"> <div class="pull-right"> <a href="#top" data-proofer-ignore> Back to top <i class="fa fa-level-up" aria-hidden="true"></i></a> </div> </div> </div> </div> </footer> <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-76230130-1', {
          'cookieDomain': 'marlinfw.org',
          'siteSpeedSampleRate': 80
      });

      ga('require', 'displayfeatures');
      ga('send', 'pageview');
    </script> </body> </html>