<!DOCTYPE html> <html lang="en"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1"> <title>Unified Bed Leveling | Marlin 3D Printer Firmware</title> <meta property="og:title" content="Unified Bed Leveling"> <meta name="author" content="Bob-the-Kuhn, thinkyhead, Roxy-3D"> <meta property="og:locale" content="en_US"> <meta name="description" content="The Unified Auto Bed Leveling system (UBL) provides automated procedures to probe the bed and compensate for an irregular or tilted bed"> <meta property="og:description" content="The Unified Auto Bed Leveling system (UBL) provides automated procedures to probe the bed and compensate for an irregular or tilted bed"> <link rel="canonical" href="http://marlinfw.org/docs/features/unified_bed_leveling.html"> <meta property="og:url" content="http://marlinfw.org/docs/features/unified_bed_leveling.html"> <meta property="og:site_name" content="Marlin 3D Printer Firmware"> <meta property="og:type" content="article"> <meta property="article:published_time" content="2017-05-13T08:25:59+01:00"> <script type="application/ld+json">
{"@context":"http://schema.org","@type":"BlogPosting","headline":"Unified Bed Leveling","author":{"@type":"Person","name":"Bob-the-Kuhn, thinkyhead, Roxy-3D"},"datePublished":"2017-05-13T08:25:59+01:00","dateModified":"2017-05-13T08:25:59+01:00","description":"The Unified Auto Bed Leveling system (UBL) provides automated procedures to probe the bed and compensate for an irregular or tilted bed","publisher":{"@type":"Organization","logo":{"@type":"ImageObject","url":"http://marlinfw.org/assets/images/logo/marlin/small.png"},"name":"Bob-the-Kuhn, thinkyhead, Roxy-3D"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://marlinfw.org/docs/features/unified_bed_leveling.html"},"url":"http://marlinfw.org/docs/features/unified_bed_leveling.html"}</script> <link rel="icon" href="/assets/favicon.ico"> <link rel="stylesheet" href="/assets/stylesheets/main.css"> <!--[if lt IE 9]><script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script> <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script><![endif]--> <script src="/assets/javascript/head.min.js"></script> <script type="text/javascript">
      /**
       * As Github pages do not support https for custom domains
       * this is the current best workaround for #18.
       */
      var domains  = ['marlinfw.org', 'localhost', '127.0.0.1' ];
      var pathname = location.pathname.replace(/^\/MarlinDocumentation/, '')
      if (domains.indexOf(window.location.hostname) == -1)
          window.top.location.href = 'http://marlinfw.org' + pathname;

      /**
       * Another ugly workaround trying to improve UX reported by #35
       */
       if (location.protocol != 'http:')
           location.href = 'http:' + window.location.href.substring(window.location.protocol.length);

      /**
       * Improves overall speed by loading javascript and css resources in parallel
       * with the main page.
       */
      head.load(
          "/assets/stylesheets/font-awesome.min.css",

          "/assets/javascript/jquery-2.2.1.min.js",
          "/assets/javascript/jquery-ui.min.js",
          "/assets/javascript/bootstrap.min.js",
          "/assets/javascript/tocify.min.js",
          "/assets/javascript/custom.js",

          "/assets/javascript/sheetrock.min.js",
          "/assets/javascript/cookieconsent.min.js"
      );

      head.ready(function() {
        window.cookieconsent_options = {
          "message":"We uses cookies to ensure you get the best experience on our website",
          "dismiss": "Got it!", "learnMore": "More info", "link":"", "theme": "dark-bottom"
        };
      });
    </script> </head> <body role="document"> <nav class="navbar navbar-default navbar-fixed-top custom-no-margin"> <div class="container"> <div class="navbar-header"> <a href="/" class="navbar-brand"> <img src="/assets/images/logo/marlin/text-25.png" alt="Marlin"> </a> <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button> </div> <div class="navbar-collapse collapse" id="navbar-main"> <ul class="nav navbar-nav"> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="navbar-getting-started"> Getting Started <span class="caret"></span> </a> <ul class="dropdown-menu"> <li><a href="/docs/basics/introduction.html"> Introduction </a></li> <li class="divider"> </li> <li><a href="/meta/download/"> Download Marlin </a></li> <li><a href="/docs/basics/install.html"> Installing Marlin </a></li> <li><a href="/docs/configuration/configuration.html"> Configuring Marlin </a></li> <li class="divider"> </li> <li><a href="/docs/basics/reporting_bugs.html"> Reporting bugs </a></li> </ul> </li> <li><a href="/meta/download/"> Download </a></li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="navbar-documentation"> Documentation <span class="caret"></span> </a> <ul class="dropdown-menu"> <li class="dropdown-submenu configuration"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Configuration</a> <ul class="dropdown-menu"> <li><a href="/meta/configuration/"> All documents </a></li> <li class="divider"> </li> <li><a href="/docs/configuration/configuration.html"> Configuring Marlin 1.1 </a></li> <li><a href="/docs/configuration/probes.html"> Probe Configuration </a></li> </ul> </li> <li class="dropdown-submenu development"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Development</a> <ul class="dropdown-menu"> <li><a href="/meta/development/"> All documents </a></li> <li class="divider"> </li> <li><a href="/docs/development/boards.html"> Boards </a></li> <li><a href="/docs/development/coding_standards.html"> Coding Standards </a></li> <li><a href="/docs/development/contributing.html"> Contributing to Marlin </a></li> <li><a href="/docs/development/getting_started_pull_requests.html"> Contributing Code with Pull Requests </a></li> <li><a href="/docs/development/feature_request.html"> Feature requests </a></li> <li><a href="/docs/development/fonts.html"> Adding new fonts </a></li> </ul> </li> <li class="dropdown-submenu gcode"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">G-Code</a> <ul class="dropdown-menu"> <li><a href="/meta/gcode/"> All documents </a></li> <li class="divider"> </li> <li><a href="/docs/gcode/G000-G001.html"> G0-G1: Linear Move </a></li> <li><a href="/docs/gcode/G002-G003.html"> G2-G3: Controlled Arc Move </a></li> <li><a href="/docs/gcode/G004.html"> G4: Dwell </a></li> <li><a href="/docs/gcode/G005.html"> G5: Bézier cubic spline </a></li> <li><a href="/docs/gcode/G010.html"> G10: Retract </a></li> <li><a href="/docs/gcode/G011.html"> G11: Recover </a></li> <li><a href="/docs/gcode/G012.html"> G12: Clean the Nozzle </a></li> <li><a href="/docs/gcode/G020.html"> G20: Inch Units </a></li> <li><a href="/docs/gcode/G021.html"> G21: Millimeter Units </a></li> <li><a href="/docs/gcode/G026.html"> G26: Mesh Validation Pattern </a></li> <li><a href="/docs/gcode/G027.html"> G27: Park the nozzle </a></li> <li><a href="/docs/gcode/G028.html"> G28: Auto Home </a></li> <li><a href="/docs/gcode/G029-mbl.html"> G29: Mesh Bed Leveling </a></li> <li><a href="/docs/gcode/G029-abl.html"> G29: Automatic Bed Leveling </a></li> <li><a href="/docs/gcode/G029-ubl.html"> G29: Unified Bed Leveling - Coming Soon! </a></li> <li><a href="/docs/gcode/G030.html"> G30: Single Z-Probe </a></li> <li><a href="/docs/gcode/G031.html"> G31: Dock Sled </a></li> <li><a href="/docs/gcode/G032.html"> G32: Undock Sled </a></li> <li><a href="/docs/gcode/G033.html"> G33: Delta Auto Calibration </a></li> <li><a href="/docs/gcode/G038.html"> G38.2-G38.3: Probe target </a></li> <li><a href="/docs/gcode/G090.html"> G90: Absolute Positioning </a></li> <li><a href="/docs/gcode/G091.html"> G91: Relative Positioning </a></li> <li><a href="/docs/gcode/G092.html"> G92: Set Position </a></li> <li><a href="/docs/gcode/M000-M001.html"> M0-M1: Unconditional stop </a></li> <li><a href="/docs/gcode/M017.html"> M17: Enable Steppers </a></li> <li><a href="/docs/gcode/M018.html"> M18-M84: Disable steppers </a></li> <li><a href="/docs/gcode/M020.html"> M20: List SD Card </a></li> <li><a href="/docs/gcode/M021.html"> M21: Init SD card </a></li> <li><a href="/docs/gcode/M022.html"> M22: Release SD card </a></li> <li><a href="/docs/gcode/M023.html"> M23: Select SD file </a></li> <li><a href="/docs/gcode/M024.html"> M24: Start or Resume SD print </a></li> <li><a href="/docs/gcode/M025.html"> M25: Pause SD print </a></li> <li><a href="/docs/gcode/M026.html"> M26: Set SD position </a></li> <li><a href="/docs/gcode/M027.html"> M27: Report SD print status </a></li> <li><a href="/docs/gcode/M028.html"> M28: Start SD write </a></li> <li><a href="/docs/gcode/M029.html"> M29: Stop SD write </a></li> <li><a href="/docs/gcode/M030.html"> M30: Delete SD file </a></li> <li><a href="/docs/gcode/M031.html"> M31: Print time </a></li> <li><a href="/docs/gcode/M032.html"> M32: Select and Start </a></li> <li><a href="/docs/gcode/M033.html"> M33: Get Long Path </a></li> <li><a href="/docs/gcode/M034.html"> M34: SDCard Sorting </a></li> <li><a href="/docs/gcode/M042.html"> M42: Set Pin State </a></li> <li><a href="/docs/gcode/M043.html"> M43: Debug Pins </a></li> <li><a href="/docs/gcode/M048.html"> M48: Probe Accuracy Test </a></li> <li><a href="/docs/gcode/M075.html"> M75: Start Print Job </a></li> <li><a href="/docs/gcode/M076.html"> M76: Pause Print Job </a></li> <li><a href="/docs/gcode/M077.html"> M77: Stop Print Job </a></li> <li><a href="/docs/gcode/M078.html"> M78: Print Job Stats </a></li> <li><a href="/docs/gcode/M080.html"> M80: Power On </a></li> <li><a href="/docs/gcode/M081.html"> M81: Power Off </a></li> <li><a href="/docs/gcode/M082.html"> M82: E Absolute </a></li> <li><a href="/docs/gcode/M083.html"> M83: E Relative </a></li> <li><a href="/docs/gcode/M085.html"> M85: Inactivity Shutdown </a></li> <li><a href="/docs/gcode/M092.html"> M92: Set Axis Steps-per-unit </a></li> <li><a href="/docs/gcode/M100.html"> M100: Free Memory </a></li> <li><a href="/docs/gcode/M104.html"> M104: Set Hotend Temperature </a></li> <li><a href="/docs/gcode/M105.html"> M105: Report Temperatures </a></li> <li><a href="/docs/gcode/M106.html"> M106: Set Fan Speed </a></li> <li><a href="/docs/gcode/M107.html"> M107: Fan Off </a></li> <li><a href="/docs/gcode/M108.html"> M108: Break and Continue </a></li> <li><a href="/docs/gcode/M109.html"> M109: Wait for Hotend Temperature </a></li> <li><a href="/docs/gcode/M110.html"> M110: Set Line Number </a></li> <li><a href="/docs/gcode/M111.html"> M111: Debug Level </a></li> <li><a href="/docs/gcode/M112.html"> M112: Emergency Stop </a></li> <li><a href="/docs/gcode/M113.html"> M113: Host Keepalive </a></li> <li><a href="/docs/gcode/M114.html"> M114: Get Current Position </a></li> <li><a href="/docs/gcode/M115.html"> M115: Firmware Info </a></li> <li><a href="/docs/gcode/M117.html"> M117: Set LCD Message </a></li> <li><a href="/docs/gcode/M119.html"> M119: Endstop States </a></li> <li><a href="/docs/gcode/M120.html"> M120: Enable Endstops </a></li> <li><a href="/docs/gcode/M121.html"> M121: Disable Endstops </a></li> <li><a href="/docs/gcode/M125.html"> M125: Park Head </a></li> <li><a href="/docs/gcode/M126.html"> M126: Baricuda 1 Open </a></li> <li><a href="/docs/gcode/M127.html"> M127: Baricuda 1 Close </a></li> <li><a href="/docs/gcode/M128.html"> M128: Baricuda 2 Open </a></li> <li><a href="/docs/gcode/M129.html"> M129: Baricuda 2 Close </a></li> <li><a href="/docs/gcode/M140.html"> M140: Set Bed Temperature </a></li> <li><a href="/docs/gcode/M145.html"> M145: Set Material Preset </a></li> <li><a href="/docs/gcode/M149.html"> M149: Set Temperature Units </a></li> <li><a href="/docs/gcode/M150.html"> M150: Set RGB Color </a></li> <li><a href="/docs/gcode/M155.html"> M155: Temperature Auto-Report </a></li> <li><a href="/docs/gcode/M163.html"> M163: Set Mix Factor </a></li> <li><a href="/docs/gcode/M164.html"> M164: Save Mix </a></li> <li><a href="/docs/gcode/M165.html"> M165: Set Mix </a></li> <li><a href="/docs/gcode/M190.html"> M190: Wait for Bed Temperature </a></li> <li><a href="/docs/gcode/M200.html"> M200: Set Filament Diameter </a></li> <li><a href="/docs/gcode/M201.html"> M201: Set Print Max Acceleration </a></li> <li><a href="/docs/gcode/M203.html"> M203: Set Max Feedrate </a></li> <li><a href="/docs/gcode/M204.html"> M204: Set Starting Acceleration </a></li> <li><a href="/docs/gcode/M205.html"> M205: Set Advanced Settings </a></li> <li><a href="/docs/gcode/M206.html"> M206: Set Home Offsets </a></li> <li><a href="/docs/gcode/M207.html"> M207: Set Firmware Retraction </a></li> <li><a href="/docs/gcode/M208.html"> M208: Set Firmware Recovery </a></li> <li><a href="/docs/gcode/M209.html"> M209: Set Auto Retract </a></li> <li><a href="/docs/gcode/M211.html"> M211: Software Endstops </a></li> <li><a href="/docs/gcode/M218.html"> M218: Set Hotend Offset </a></li> <li><a href="/docs/gcode/M220.html"> M220: Set Feedrate Percentage </a></li> <li><a href="/docs/gcode/M221.html"> M221: Set Flow Percentage </a></li> <li><a href="/docs/gcode/M226.html"> M226: Wait for Pin State </a></li> <li><a href="/docs/gcode/M240.html"> M240: Trigger Camera </a></li> <li><a href="/docs/gcode/M250.html"> M250: LCD Contrast </a></li> <li><a href="/docs/gcode/M260.html"> M260: I2C Send </a></li> <li><a href="/docs/gcode/M261.html"> M261: I2C Request </a></li> <li><a href="/docs/gcode/M280.html"> M280: Servo Position </a></li> <li><a href="/docs/gcode/M300.html"> M300: Play Tone </a></li> <li><a href="/docs/gcode/M301.html"> M301: Set Hotend PID </a></li> <li><a href="/docs/gcode/M302.html"> M302: Cold Extrude </a></li> <li><a href="/docs/gcode/M303.html"> M303: PID autotune </a></li> <li><a href="/docs/gcode/M304.html"> M304: Set Bed PID </a></li> <li><a href="/docs/gcode/M350.html"> M350: Set micro-stepping </a></li> <li><a href="/docs/gcode/M351.html"> M351: Set Microstep Pins </a></li> <li><a href="/docs/gcode/M355.html"> M355: Case Light Control </a></li> <li><a href="/docs/gcode/M360.html"> M360: SCARA Theta A </a></li> <li><a href="/docs/gcode/M361.html"> M361: SCARA Theta-B </a></li> <li><a href="/docs/gcode/M362.html"> M362: SCARA Psi-A </a></li> <li><a href="/docs/gcode/M363.html"> M363: SCARA Psi-B </a></li> <li><a href="/docs/gcode/M364.html"> M364: SCARA Psi-C </a></li> <li><a href="/docs/gcode/M380.html"> M380: Activate Solenoid </a></li> <li><a href="/docs/gcode/M381.html"> M381: Deactivate Solenoids </a></li> <li><a href="/docs/gcode/M400.html"> M400: Finish Moves </a></li> <li><a href="/docs/gcode/M401.html"> M401: Deploy Probe </a></li> <li><a href="/docs/gcode/M402.html"> M402: Stow Probe </a></li> <li><a href="/docs/gcode/M404.html"> M404: Set Filament Diameter </a></li> <li><a href="/docs/gcode/M405.html"> M405: Filament Width Sensor On </a></li> <li><a href="/docs/gcode/M406.html"> M406: Filament Width Sensor Off </a></li> <li><a href="/docs/gcode/M407.html"> M407: Filament Width </a></li> <li><a href="/docs/gcode/M410.html"> M410: Quickstop </a></li> <li><a href="/docs/gcode/M420.html"> M420: Bed Leveling State </a></li> <li><a href="/docs/gcode/M421.html"> M421: Set Mesh Value </a></li> <li><a href="/docs/gcode/M428.html"> M428: Home Offsets Here </a></li> <li><a href="/docs/gcode/M500.html"> M500: Save Settings </a></li> <li><a href="/docs/gcode/M501.html"> M501: Restore Settings </a></li> <li><a href="/docs/gcode/M502.html"> M502: Factory Reset </a></li> <li><a href="/docs/gcode/M503.html"> M503: Report Settings </a></li> <li><a href="/docs/gcode/M540.html"> M540: Endstops Abort SD </a></li> <li><a href="/docs/gcode/M600.html"> M600: Filament Change </a></li> <li><a href="/docs/gcode/M605.html"> M605: Dual Nozzle Mode </a></li> <li><a href="/docs/gcode/M665.html"> M665: Coming Soon </a></li> <li><a href="/docs/gcode/M666.html"> M666: Coming Soon </a></li> <li><a href="/docs/gcode/M851.html"> M851: Z Probe Offset </a></li> <li><a href="/docs/gcode/M906.html"> M906: TMC Motor Current </a></li> <li><a href="/docs/gcode/M907.html"> M907: Set Motor Current </a></li> <li><a href="/docs/gcode/M908.html"> M908: Set Trimpot Pins </a></li> <li><a href="/docs/gcode/M909.html"> M909: DAC Print Values </a></li> <li><a href="/docs/gcode/M910.html"> M910: Commit DAC to EEPROM </a></li> <li><a href="/docs/gcode/M911.html"> M911: TMC OT Pre-Warn Condition </a></li> <li><a href="/docs/gcode/M912.html"> M912: Clear TMC OT Pre-Warn </a></li> <li><a href="/docs/gcode/M913.html"> M913: Set Hybrid Threshold Speed </a></li> <li><a href="/docs/gcode/M914.html"> M914: TMC Bump Sensitivity </a></li> <li><a href="/docs/gcode/M928.html"> M928: Start SD Write </a></li> <li><a href="/docs/gcode/M999.html"> M999: Coming Soon </a></li> </ul> </li> <li class="dropdown-submenu features"> <a href="#" class="dropdown-toggle" data-toggle="dropdown">Marlin Features</a> <ul class="dropdown-menu"> <li><a href="/meta/features/"> All documents </a></li> <li class="divider"> </li> <li><a href="/docs/features/auto_bed_leveling.html"> Automatic Bed Leveling </a></li> <li><a href="/docs/features/lin_advance.html"> Linear Advance </a></li> <li><a href="/docs/features/unified_bed_leveling.html"> Unified Bed Leveling </a></li> </ul> </li> <li class="divider"> </li> <li><a href="/meta/needs-review/"> Documentation Needing Review </a></li> </ul> </li> <li class="dropdown"> <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="navbar-tools"> Tools <span class="caret"></span></a> <ul class="dropdown-menu"> <li><a href="/tools/u8glib/converter.html"> Customize the Bootscreen </a></li> <li class="divider"> </li> <li><a href="https://github.com/MarlinFirmware/Marlin/issues"> Bugtracker </a></li> <li><a href="/docs/basics/reporting_bugs.html"> Reporting bugs </a></li> <li class="divider"> </li> <li><a href="https://github.com/MarlinFirmware/Marlin"> Source Code Repository </a></li> </ul> </li> </ul> <ul class="nav navbar-nav navbar-right visible-lg-block"> <li><a href="https://github.com/MarlinFirmware/MarlinDocumentation/edit/master/_features/unified_bed_leveling.md" data-proofer-ignore> <i class="fa fa-pencil-square-o" aria-hidden="true"></i> <span>Improve this page</span> </a></li> </ul> </div> </div> </nav> <div class="container" role="main"> <div class="row"> <div class="col-lg-3 col-md-4 visible-lg-block visible-md-block custom-no-padding"> <div class="custom-fixed-sidebar"> <div id="toc"></div> </div> </div> <div class="col-lg-9 col-md-8 custom-bg-white"> <div class="row"> <div class="col-md-12 custom-article"> <p class="text-right pull-right visible-lg-block hidden-print small custom-pt25"> <a href="https://github.com/Bob-the-Kuhn" data-toggle="tooltip" data-placement="bottom" title="Visit Bob-the-Kuhn's profile on Github"><img class="avatar avatar-small" src="https://avatars0.githubusercontent.com/Bob-the-Kuhn?v=3&amp;s=30" alt="Bob-the-Kuhn" srcset="https://avatars0.githubusercontent.com/Bob-the-Kuhn?v=3&amp;s=30 1x, https://avatars0.githubusercontent.com/Bob-the-Kuhn?v=3&amp;s=60 2x, https://avatars0.githubusercontent.com/Bob-the-Kuhn?v=3&amp;s=90 3x, https://avatars0.githubusercontent.com/Bob-the-Kuhn?v=3&amp;s=120 4x" width="30" height="30" data-proofer-ignore="true"></a> <a href="https://github.com/thinkyhead" data-toggle="tooltip" data-placement="bottom" title="Visit thinkyhead's profile on Github"><img class="avatar avatar-small" src="https://avatars1.githubusercontent.com/thinkyhead?v=3&amp;s=30" alt="thinkyhead" srcset="https://avatars1.githubusercontent.com/thinkyhead?v=3&amp;s=30 1x, https://avatars1.githubusercontent.com/thinkyhead?v=3&amp;s=60 2x, https://avatars1.githubusercontent.com/thinkyhead?v=3&amp;s=90 3x, https://avatars1.githubusercontent.com/thinkyhead?v=3&amp;s=120 4x" width="30" height="30" data-proofer-ignore="true"></a> <a href="https://github.com/Roxy-3D" data-toggle="tooltip" data-placement="bottom" title="Visit Roxy-3D's profile on Github"><img class="avatar avatar-small" src="https://avatars2.githubusercontent.com/Roxy-3D?v=3&amp;s=30" alt="Roxy-3D" srcset="https://avatars2.githubusercontent.com/Roxy-3D?v=3&amp;s=30 1x, https://avatars2.githubusercontent.com/Roxy-3D?v=3&amp;s=60 2x, https://avatars2.githubusercontent.com/Roxy-3D?v=3&amp;s=90 3x, https://avatars2.githubusercontent.com/Roxy-3D?v=3&amp;s=120 4x" width="30" height="30" data-proofer-ignore="true"></a> </p> <h1 class="custom-article-header">Unified Bed Leveling</h1> <hr> <div class="container-fluid"> <div class="row alert alert-info custom-alert"> <div class="col-lg-1 col-md-2 visible-lg-block visible-md-block custom-alert-icon"> <i class="fa fa-info-circle fa-4x" aria-hidden="true"></i> </div> <div class="col-lg-11 col-md-10 custom-alert-text"> <p>This page is a work in progress. Corrections/improvements are welcome.</p> </div> </div> </div> <ul> <li>A comprehensive LCD menu system for UBL is coming soon.</li> <li>Also see <a href="http://marlinfw.org/docs/gcode/G026.html">GCode G26</a> and <a href="http://marlinfw.org/docs/gcode/G029-ubl.html">G29 for UBL</a> (coming soon).</li> </ul> <h2 id="ubl-startup-guide">UBL Startup Guide</h2> <p>The <strong>Unified Bed Leveling (UBL)</strong> system is a superset of the previous leveling systems.</p> <p>The main improvements over the previous systems are:</p> <ul> <li>Finer X Y resolution of the Z compensation. This is accomplished by Updating the Z compensation whenever a mesh boundary is crossed.</li> <li>The user is able to fill in the portions of the mesh that can’t be reached by automated probing. This allows the entire bed to be compensated.</li> <li>It allows the user to fine tune the system. The user is able to modify the mesh based on print results. Really good first layer adhesion and height can be achieved over the entire bed.</li> </ul> <h3 id="synopsis">Synopsis</h3> <p>UBL currently requires both a host and an LCD display with a rotary encoder. Work is in progress to adapt GCode and controller-based procedures to work with UBL.</p> <p>The printer must be already fully functional and tested, with a well-constrained movement system. The more physically level and straight the bed is, the better your results will be. See <code class="highlighter-rouge">Configuration.h</code> and <code class="highlighter-rouge">Configuration_adv.h</code> for all of UBL’s settings.</p> <p>The following command sequence can be used to home, level, and then fine-tune the results:</p> <pre><code class="language-gcode">M502          ; Reset settings to configuration defaults...
M500          ; ...and Save to EEPROM. Use this on a new install.

M190 S65      ; Not required, but having the printer at temperature helps accuracy
M104 S210     ; Not required, but having the printer at temperature helps accuracy

G28           ; Home XYZ.
G29 P1        ; Do automated probing of the bed.
G29 P2 B O    ; Do manual probing of unprobed points. Requires LCD.
G29 P3 O      ; Repeat until all mesh points are filled in.

G29 O         ; View the Z compensation values.
M420 S1       ; Activate leveling compensation.
G29 S1        ; Save UBL mesh points to EEPROM.
M500          ; Save current setup. WARNING: UBL will be active at power up, before any `G28`.

G26 C P O3.0  ; Produce mesh validation pattern with primed nozzle
G29 P4 O      ; Move nozzle to 'bad' areas and fine tune the values if needed
              ; Repeat G26 and G29 P4 O commands as needed.

G29 S1        ; Save UBL mesh values to EEPROM.
</code></pre> <h3 id="scope">Scope</h3> <p>The UBL system contains a suite of tools with multiple options intended to cover almost any situation. This document is aimed at getting a new user acquainted with the most used tools and options needed to produce a high quality print.</p> <p>The intent is to provide a new user with enough knowledge of the UBL system that they can go to the detailed documentation and start working with the other tools and options as needed.</p> <p>The 3-point leveling option is not covered in this guide.</p> <h3 id="theory">Theory</h3> <p>UBL projects a rectangular grid over the print bed. A Z height is measured at each point (confluence) in the grid.</p> <p>Linear moves are split at grid boundaries. For each segment the Z offset at start and end are calculated. The Z compensation varies linearly from the start to end of the move.</p> <p>Note that kinematic systems like Delta and SCARA already split moves into very small segments, removing the need to split moves at grid boundaries. In the future, moves may be split into smaller segments on Cartesian also to produce more fine-grained Z height changes through the move.</p> <p>The Z compensation on any grid line is the simple linear interpolation of the Z offsets of the two corners it connects.</p> <p>The Z compensation for any point within a grid box is produced by calculating the bilinear interpolation of the Z offsets of the four corner points. See the addendum <strong>Bilinear computation</strong> for details.</p> <p>Tools are provided that can populate the Z compensation values at the mesh points via automated probing, manual probing, and manually entering a value. The intent of UBL is to allow the entire printable area of the bed to have usable Z compensation values.</p> <p>The initial auto bed leveling procedure rarely produces great results across the whole bed. Fine editing tools are used to tune the mesh more finely. UBL includes a test print utility to aid in the tuning process.</p> <h3 id="process-overview">Process overview</h3> <p>To create a mesh that produces good first-layer results over the entire bed, follow this procedure:</p> <ol> <li>Setup the UBL parameters in <code class="highlighter-rouge">Configuration.h</code> and <code class="highlighter-rouge">Configuration_adv.h</code>.</li> <li>Perform automated probing.</li> <li>Perform additional manual probing, if needed.</li> <li>Run the test print utility.</li> <li>Fine tune the matrix.</li> <li>Repeat steps 5 and 6 until satisfied.</li> </ol> <p>An LCD controller with rotary encoder is required.</p> <p>The printer and LCD must be fully functional before starting this process.</p> <h4 id="ubl-configuration">UBL Configuration</h4> <p>UBL configuration options are located in <code class="highlighter-rouge">Configuration.h</code> and <code class="highlighter-rouge">Configuration_adv.h</code>.</p> <p>Enable these options:</p> <ul> <li> <code class="highlighter-rouge">AUTO_BED_LEVELING_UBL</code>. Leave the others commented out.</li> <li> <code class="highlighter-rouge">UBL_G26_MESH_EDITING</code> for <code class="highlighter-rouge">G26</code>.</li> <li> <code class="highlighter-rouge">EEPROM_SETTINGS</code>. <strong>EEPROM support is required.</strong> </li> <li>One of the LCD options. <strong><em>An LCD with a rotary encoder is required.</em></strong> </li> </ul> <p><strong>Z Probe XY offsets</strong> should be set to within 1mm of the measured distance from the nozzle to the probe. Ideally the error should be less than +-2mm. Errors of 5mm have been known to cause difficulties in fine-tuning.</p> <p><strong>Travel limits</strong> tell the system where the nozzle can reach. This is used during automated probing to determine what points the PROBE can reach.</p> <p>All printers require these settings, which specify the physical movement limits for the nozzle:</p> <div class="language-cpp highlighter-rouge"> <pre class="highlight"><code><span class="cp">#define X_MIN_POS xxx
#define Y_MIN_POS xxx
#define Z_MIN_POS xxx
#define X_MAX_POS xxx
#define Y_MAX_POS xxx
#define Z_MAX_POS xxx
</span></code></pre> </div> <p><strong>Bed size</strong> – These define the boundaries of the UBL mesh - the region of the bed the probe can reach. Ideally they will match your printable area perfectly. In practice it’s a good idea to pull these in a bit if the printable area goes right up to the edge of the bed. This helps keep the probe from missing the bed. These are required if the bed is smaller than the travel limits or the probe can’t reach some parts of the bed.</p> <p>The automated settings assume that the printable area is centered in the physical area (as specified above), and just applies an inset to all sides. Modify the min/max settings here to fit your situation:</p> <div class="language-cpp highlighter-rouge"> <pre class="highlight"><code><span class="cp">#define UBL_MESH_INSET 10
#define UBL_MESH_MIN_X (X_MIN_POS + UBL_MESH_INSET)
#define UBL_MESH_MAX_X (X_MAX_POS - (UBL_MESH_INSET))
#define UBL_MESH_MIN_Y (Y_MIN_POS + UBL_MESH_INSET)
#define UBL_MESH_MAX_Y (Y_MAX_POS - (UBL_MESH_INSET))
</span></code></pre> </div> <p>For delta printers define… (???)</p> <p><strong>Mesh density</strong> – 3 x 3 through 15 x 15 meshes are supported. X &amp; Y dimensions do NOT need to be the same. First time users should start out with a small mesh until they are familiar with the tools. Once you’re proficient then move to larger meshes. 7 x 7 seems to be a popular size for a first attempt at a final mesh.</p> <p>In the <code class="highlighter-rouge">AUTO_BED_LEVELING_UBL</code> section of <code class="highlighter-rouge">Configuration.h</code> set the following:</p> <div class="language-cpp highlighter-rouge"> <pre class="highlight"><code><span class="cp">#define GRID_MAX_POINTS_X    3
#define GRID_MAX_POINTS_Y    GRID_MAX_POINTS_X
</span></code></pre> </div> <h4 id="commands">Commands</h4> <p>UBL has a series of “phase” commands that roughly follow the mesh building process. Some are heavily used, some aren’t.</p> <p>There are several options that can be applied to each of the phase commands. These are the most common:</p> <table> <thead> <tr> <th>Command</th> <th>Description</th> </tr> </thead> <tbody> <tr> <td><code class="highlighter-rouge">G29 P1</code></td> <td>Phase 1 – Automatically probe the bed.</td> </tr> <tr> <td><code class="highlighter-rouge">G29 P2</code></td> <td>Phase 2 – Manually probe points that automated probing couldn’t reach.</td> </tr> <tr> <td><code class="highlighter-rouge">G29 P3</code></td> <td>Phase 3 – Assign values to points that still need values – mostly used with delta printers.</td> </tr> <tr> <td><code class="highlighter-rouge">G29 P4</code></td> <td>Phase 4 – Fine tune the mesh.</td> </tr> <tr> <td><code class="highlighter-rouge">G29 Snn</code></td> <td>Store the mesh in EEPROM slot <code class="highlighter-rouge">nn</code>.</td> </tr> <tr> <td> <code class="highlighter-rouge">G29 Lnn</code> or <code class="highlighter-rouge">M420 Lnn</code> </td> <td>Load a mesh from EEPROM slot <code class="highlighter-rouge">nn</code>. (Other leveling systems use <code class="highlighter-rouge">M501</code>.)</td> </tr> <tr> <td> <code class="highlighter-rouge">G29 A</code> or <code class="highlighter-rouge">M420 S1</code> </td> <td>Activate the Z compensation bed leveling. (Use <code class="highlighter-rouge">M420 S1</code> for public/shared Gcode.)</td> </tr> <tr> <td> <code class="highlighter-rouge">G29 D</code> or <code class="highlighter-rouge">M420 S0</code> </td> <td>Disable the Z compensation bed leveling. (Use <code class="highlighter-rouge">M420 S0</code> for public/shared Gcode.)</td> </tr> <tr> <td> <code class="highlighter-rouge">G29 O</code> or <code class="highlighter-rouge">M420 V</code> </td> <td>Print a map of the mesh.</td> </tr> <tr> <td><code class="highlighter-rouge">G26</code></td> <td>Print a pattern to test mesh accuracy.</td> </tr> <tr> <td> <code class="highlighter-rouge">M502</code>, <code class="highlighter-rouge">M500</code> </td> <td>Reset settings to defaults, save to EEPROM.</td> </tr> </tbody> </table> <h4 id="automated-probing">Automated probing</h4> <p>The first step in the process is to use the Z probe to populate as much of the mesh as possible.</p> <p>To start the process issue <code class="highlighter-rouge">G29 P1</code> or, if you want to see the values as they are measured, <code class="highlighter-rouge">G29 P1 O</code></p> <p>If the EEPROM hasn’t been initialized then it’ll tell you to issue the <code class="highlighter-rouge">M502, M500, M501</code> sequence. If that happens then you’ll need to re-issue the <code class="highlighter-rouge">G29 P1</code> command.</p> <p>If a <code class="highlighter-rouge">G28</code> hasn’t already been done then the <code class="highlighter-rouge">G28</code> sequence will automatically be done followed by the<code class="highlighter-rouge"> G29 P1</code> probing.</p> <p>No further action is required of the user for this phase.</p> <p>If you do a <code class="highlighter-rouge">G29 O</code> or <code class="highlighter-rouge">M420 V</code> command you’ll most likely see areas that do not have Z compensation values. See the addendum <strong>Automatically probed area</strong> for details.</p> <h4 id="manual-probing">Manual probing</h4> <p>This step uses the encoder wheel to move the nozzle up and down in 0.01mm steps. BE VERY CAREFUL when doing this. Nasty things can happen if too much force is applied to the bed by the nozzle.</p> <p>Most systems will have areas that the Z probe can’t reach. These will need to be manually probed.</p> <p>Manual probing consists of lowering the nozzle until the nozzle comes in contact with a feeler gauge. Usually the feeler gauge is a piece of paper or a business card. It’s better if the gauge is a piece of plastic that’s hard but still has some flex. Even better is a mechanic’s metal feeler gauge but those are usually too short to be convenient.</p> <p>The idea is to stop lowering when there is the first sign of resistance to moving the gauge. It is VERY IMPORTANT that you be consistent in the amount of force/resistance from point to point.</p> <p>The first step is to measure the thickness of the feeler gauge.</p> <p>Issue <code class="highlighter-rouge">G29 P2 B O</code> to start.</p> <p>The nozzle will move to the center of the bed.</p> <p>Use the encoder wheel to move the nozzle until you feel a small amount of resistance. This is the resistance level you’ll want to aim for when manually probing.</p> <p>Click the encoder button.</p> <p>Remove the feeler gauge.</p> <p>Lower the nozzle <strong>VERY SLOWLY</strong> until the nozzle just touches the bed.</p> <p>Click the encoder button.</p> <p>The nozzle will move to the first unmeasured location. Use the encoder to lower the nozzle until the desired resistance is felt with the feeler gauge. Click the encoder. The nozzle then moves to the next unmeasured location. Repeat until all locations are measured.</p> <p>You can look at the host interface screen to see where in the grid you are currently probing.</p> <p>When done, you can issue a <code class="highlighter-rouge">G29 S</code> command to save the mesh to EEPROM.</p> <h4 id="test-print">Test print</h4> <p>Once you have a reasonable looking mesh then it’s time to do a test print.</p> <p>The easiest way to do this is to use the <code class="highlighter-rouge">G26</code> command.</p> <p>There are several options for the <code class="highlighter-rouge">G26</code> command. See <a href="http://marlinfw.org/docs/gcode/G026.html">GCode G26</a> for details.</p> <p><code class="highlighter-rouge">G26 Bxx Hyy F1.75 L0.2 N0.4</code> will usually get you something reasonable:</p> <ul> <li> <code class="highlighter-rouge">Bxx</code> – bed temperature</li> <li> <code class="highlighter-rouge">Hyy</code> – hotend temperature</li> <li> <code class="highlighter-rouge">F1.75</code> – filament width of 1.75mm (default)</li> <li> <code class="highlighter-rouge">L0.2</code> – layer height of 0.2mm (default)</li> <li> <code class="highlighter-rouge">N0.4</code> – nozzle diameter of 0.4mm (default)</li> </ul> <h4 id="fine-tuning-of-the-matrix">Fine-tuning of the matrix</h4> <p>Look over the results of the <code class="highlighter-rouge">G26</code> print and note where adjustments are needed.</p> <p>To edit a single point move the nozzle close to the point that needs adjustment. Issue a <code class="highlighter-rouge">G29 P4 O</code>. The head will move to nearest point. Use the encoder wheel to change the value. <strong>The nozzle will not change height during this process.</strong></p> <p>To edit multiple points move the nozzle close to the first point and issue <code class="highlighter-rouge">G29 P4 O Rxx</code> where <code class="highlighter-rouge">xx</code> is the number of points you want to edit. You can look at the host interface screen to see where in the grid you are currently editing.</p> <p>Press and hold the encoder button/wheel when you are finished.</p> <p>There are options to make it easier to move to the desired probe locations.</p> <p>It’s probably a good idea to issue a <code class="highlighter-rouge">G29 S</code> command to save the mesh to EEPROM at this stage.</p> <p>Repeat the <code class="highlighter-rouge">G26</code>, <code class="highlighter-rouge">G29 P4 O</code> sequence until you have the desired first layer height quality.</p> <p>Issue a <code class="highlighter-rouge">G29 S</code> command periodically to save your mesh.</p> <p>As you print parts you may notice that further fine-tuning is needed. The <code class="highlighter-rouge">G29 P4 O</code> command can be used anytime to make adjustments.</p> <h3 id="addenda">Addenda</h3> <h4 id="bilinear-computation">Bilinear computation</h4> <ol> <li>Uses the Z heights at the 4 corners of the current XY position’s grid box.</li> <li>Performs a bilinear interpolation of the Z heights: <ul> <li>Calculates Z height (z1) at the left  edge of the box for the current Y by linear interpolation.</li> <li>Calculates Z height (z2) at the right edge of the box for the current Y by linear interpolation.</li> <li>Calculates Z height at the current X by linear interpolation between z1 and z2. This is the Z offset used for the move.</li> </ul> </li> </ol> <h4 id="mesh-areas">MESH areas</h4> <p>After <code class="highlighter-rouge">G29 P1</code> your matrix will probably have areas that do not have Z compensation values. This is because the probe can’t be positioned in these areas. The only ways to avoid this are:</p> <ul> <li>Use the nozzle as the probe (no offsets).</li> <li>Build your system so that the nozzle can travel outside the bed.</li> </ul> <p>If your probe is in front and to the right of your nozzle then the matrix will look like one of these.</p> <p><img src="/assets/images/features/bed_probe_areas.jpg" alt="image1"></p> <p>The green area is where the probing was done.</p> <p>The blue area is where the probe couldn’t get to.</p> </div> </div> </div> </div> </div> <footer> <div class="container"> <div class="row"> <div class="col-lg-12"> <hr> </div> </div> <div class="row"> <div class="col-lg-8"> <p>Brought to you with <i class="fa fa-heart text-danger" aria-hidden="true"></i> lack of <i class="fa fa-bed" aria-hidden="true"></i> and lots of <i class="fa fa-coffee" aria-hidden="true"></i>. <br> The contents of this website are © 2017 under the terms of the <a href="http://www.gnu.org/licenses/gpl-3.0.txt">GPLv3</a> License.</p> </div> <div class="col-lg-4"> <div class="pull-right"> <a href="#top" data-proofer-ignore> Back to top <i class="fa fa-level-up" aria-hidden="true"></i></a> </div> </div> </div> </div> </footer> <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-76230130-1', {
          'cookieDomain': 'marlinfw.org',
          'siteSpeedSampleRate': 80
      });

      ga('require', 'displayfeatures');
      ga('send', 'pageview');
    </script> </body> </html>