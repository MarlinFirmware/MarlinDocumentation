---
tag: m122
title: TMC Debugging
brief: Get TMC Debug Info
author: mbuc

experimental: false
since: 1.1.7
requires: TMC2130,TMC2208
group: debug

codes:
  - M122

long:
  - Do a communication check for configured TMC drivers
  - When sent without a parameter, returns a table of current register settings for any Trinamic TMC2130 or TMC2208 stepper motor drivers.  Sending the command with the `S` parameter and a following boolean will respectively enable or disable reporting the debugging information on a continous basis.

notes:
  - TMC_DEBUG no longer needed in Marlin v2.0.0 but extends the reported information.
  - Responses of all **low** (00:00:00:00) or all **high** (FF:FF:FF:FF) are signs of a communication problem.<br>
    See the [TMC troubleshooting section](docs/hardware/tmc_drivers.html) for further instructions.

parameters:
  -
    tag: X
    optional: true
    description: Target X driver(s) only.
  -
    tag: Y
    optional: true
    description: Target Y driver(s) only.
  -
    tag: Z
    optional: true
    description: Target Z driver(s) only.
  -
    tag: E
    optional: true
    description: Target E driver(s) only.
  -
    tag: V
    optional: true
    description: Report raw register data. Refer to the datasheet to decypher.
  -
    tag: S
    type: boolean
    optional: true
    description: Flag to enable/disable continuous reporting of debugging information.

examples:
  -
    pre: 'Enabling debugging output:'
    code: M122 S1
  -
    pre: 'Example Output:'
    code: |
      SENDING:M122
      X	Y
      Enabled		false	false
      Set current	850	850
      RMS current	826	826
      MAX current	1165	1165
      Run current	26/31	26/31
      Hold current	13/31	13/31
      CS actual		13/31	13/31
      PWM scale	41	41
      vsense		1=.18	1=.18
      stealthChop	true	true
      msteps		16	16
      tstep		1048575	1048575
      pwm
      threshold		0	0
      [mm/s]		-	-
      OT prewarn	false	false
      OT prewarn has
      been triggered	false	false
      off time		5	5
      blank time	24	24
      hysterisis
      -end		2	2
      -start		3	3
      Stallguard thrs	0	0
      DRVSTATUS	X	Y
      stallguard
      sg_result		0	0
      fsactive
      stst		X	X
      olb
      ola
      s2gb
      s2ga
      otpw
      ot
      'Driver registers:'
      	X = 0x80:0D:00:00
      	Y = 0x80:0D:00:00
      
---

